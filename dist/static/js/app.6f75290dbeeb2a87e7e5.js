webpackJsonp([1,2],{41:function(t,e){},42:function(t,e,n){n(85);var i=n(24)(n(45),n(90),null,null);t.exports=i.exports},45:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(89),o=n.n(i);e.default={name:"app",components:{aroundView:o.a},data:function(){return{token:"",views:!0}},methods:{getToken:function(){return this.$http.get("https://vbapi.herokuapp.com/auth/guest").then(function(t){return t.body.jwt})},viewChange:function(){this.views=!this.views}},mounted:function(){var t=this;this.getToken().then(function(e){t.token=e})}}},46:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["specie"],methods:{toggleRightSidenav:function(){var t=parseInt(event.currentTarget.id,10);this.$emit("infoPanel",t)}}}},47:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(50),o=n.n(i),s=n(51),a=n.n(s),c=n(49),r=n.n(c),l=n(88),d=n.n(l);e.default={name:"speciesList",components:{specieListItem:d.a},data:function(){return{records:[],species:[],selectedTaxonId:0,status:{error:""}}},watch:{records:function(t){var e=this,n=t.reduce(function(t,e){var n=r()({},{commonNme:e.commonNme,scientificDisplayNme:e.scientificDisplayNme,taxonId:e.taxonId,totalCountInt:Object.prototype.hasOwnProperty.call(e,"totalCountInt")?e.totalCountInt:1}),i=t.findIndex(function(t){return t.taxonId===n.taxonId});return i>-1?(n.totalCountInt+=t[i].totalCountInt,[].concat(a()(t.slice(0,i)),[n],a()(t.slice(i+1)))):[].concat(a()(t),[n])},[]),i=n.reduce(function(t,e){return[].concat(a()(t),[e.scientificDisplayNme])},[]);this.$http.post("https://bie.ala.org.au/ws/species/lookup/bulk",{names:i}).then(function(t){console.log(t.body,e.species);try{e.species=n.map(function(e,n){var i=t.body[n].smallImageUrl,o=t.body[n].thumbnailUrl;return r()({},e,{smallImageUrl:i?i.replace(/https:\/\//,"https://"):"",thumbnailUrl:o?o.replace(/https:\/\//,"https://"):""})})}catch(t){console.log(t)}}).catch(function(t){e.status.error=t})}},computed:{selectedTaxon:function(){var t=this;return this.species.filter(function(e){return e.taxonId===t.selectedTaxonId})[0]||{}}},methods:{getLocation:function(){var t={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};return new o.a(function(e,n){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){var n=t.coords.accuracy,i=t.coords.latitude,o=t.coords.longitude;console.log("Position aquired, accuracy : "+t.coords.accuracy),e({accu:n,lat:i,long:o})},function(t){console.log(t),n(new Error(t.message))},t):n(new Error("no geolocation feature present on device"))})},getRecordsByLoc:function(){var t=this,e=this.$parent.token;this.getLocation().then(function(n){console.log(n);var i={lat:n.lat,long:n.long,rad:250};t.$http.get("https://vbapi.herokuapp.com/search/point",{headers:{"x-access-token":e},params:i}).then(function(e){t.records=e.body.species,console.log(t.records.length+" Records found")})}).catch(function(e){console.log(e),t.status.error=e.message})},toggleRightSidenavCard:function(){var t=parseInt(event.currentTarget.id,10);this.selectedTaxonId=t,this.$refs.rightSidenav.toggle()},toggleRightSidenav:function(t){console.log(this.selectedTaxonId,t),this.selectedTaxonId=t,this.$refs.rightSidenav.toggle()},closeRightSidenav:function(){this.$refs.rightSidenav.close()},open:function(t){console.log("Opened: + "+t)},close:function(t){console.log("Closed: + "+t)}}}},85:function(t,e){},86:function(t,e){},87:function(t,e){},88:function(t,e,n){n(86);var i=n(24)(n(46),n(91),null,null);t.exports=i.exports},89:function(t,e,n){n(87);var i=n(24)(n(47),n(92),null,null);t.exports=i.exports},90:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("md-whiteframe",{staticClass:"main-toolbar",attrs:{"md-elevation":"1","md-theme":"light-blue"}},[n("md-toolbar",{staticClass:"main-toolbar"},[n("h1",{staticClass:"md-title"},[t._v("Vic Bio scan")]),t._v(" "),n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(e){t.viewChange()}}},[this.views?n("md-icon",[t._v("view_module")]):n("md-icon",[t._v("view_list")])],1)],1)],1),t._v(" "),n("main",{staticClass:"main-content"},[n("aroundView")],1)],1)},staticRenderFns:[]}},91:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-list-item",{staticClass:"md-list-item"},[n("md-avatar",[t.specie.thumbnailUrl?n("img",{attrs:{src:t.specie.thumbnailUrl}}):n("img",{staticClass:"emoji",attrs:{src:"http://emojione.com/wp-content/uploads/assets/emojis/1f43e.svg",alt:"emoji"}})]),t._v(" "),n("div",{staticClass:"md-list-text-container"},[n("span",[t._v(t._s(t.specie.commonNme))]),t._v(" "),n("span",[t._v(t._s(t.specie.scientificDisplayNme))]),t._v(" "),n("p",[t._v("Total count : "+t._s(t.specie.totalCountInt))])]),t._v(" "),n("md-button",{staticClass:"md-icon-button md-list-action",attrs:{id:t.specie.taxonId},nativeOn:{click:function(e){t.toggleRightSidenav(e)}}},[n("md-icon",{staticClass:"md-primary"},[t._v("info")])],1),t._v(" "),n("md-divider",{staticClass:"md-inset"})],1)},staticRenderFns:[]}},92:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"speciesList"}},[n("md-sidenav",{ref:"rightSidenav",staticClass:"md-sidenav md-right md-fixed",on:{open:function(e){t.open("Right")},close:function(e){t.close("Right")}}},[n("md-toolbar",[n("div",{staticClass:"md-toolbar-container"},[n("h3",{staticClass:"md-title"},[n("md-icon",{nativeOn:{click:function(e){t.closeRightSidenav(e)}}},[t._v("arrow_back")]),t._v(" "+t._s(t.selectedTaxon.commonNme))],1)])]),t._v(" "),n("img",{staticStyle:{"max-height":"75vh"},attrs:{src:t.selectedTaxon.smallImageUrl,alt:""}}),t._v(" "),n("md-list",[n("md-subheader",[t._v("Common name:")]),t._v(" "),n("md-list-item",[t._v(t._s(t.selectedTaxon.commonNme))]),t._v(" "),n("md-subheader",[t._v("Scientific name:")]),t._v(" "),n("md-list-item",[t._v(t._s(t.selectedTaxon.scientificDisplayNme))]),t._v(" "),n("md-subheader",[t._v("Count:")]),t._v(" "),n("md-list-item",[t._v(t._s(t.selectedTaxon.totalCountInt))])],1)],1),t._v(" "),this.$parent.views?n("md-list",t._l(t.species,function(e){return n("specieListItem",{key:e.taxonId,attrs:{specie:e},on:{infoPanel:t.toggleRightSidenav}})})):n("md-layout",t._l(t.species,function(e){return n("md-whiteframe",{key:e.taxonId,staticClass:"card",attrs:{"md-elevation":"1",specie:e}},[n("div",{staticClass:"media"},[e.thumbnailUrl?n("img",{attrs:{src:e.thumbnailUrl}}):n("img",{staticClass:"emoji",attrs:{src:"https://emojione.com/wp-content/uploads/assets/emojis/1f43e.svg",alt:"emoji"}})]),t._v(" "),n("div",{staticClass:"content"},[n("img",{staticClass:"emoji",attrs:{src:"https://emojione.com/wp-content/uploads/assets/emojis/1f43e.svg",alt:"emoji"}}),t._v(" "),n("p",{staticClass:"truncate"},[t._v(t._s(e.commonNme))]),t._v(" "),n("md-icon",{staticClass:"md-primary",attrs:{id:e.taxonId},nativeOn:{click:function(e){t.toggleRightSidenavCard(e)}}},[t._v("info")])],1)])})),t._v(" "),""!==this.$parent.token?n("md-button",{staticClass:"md-button md-fab md-fab-bottom-right",staticStyle:{position:"fixed"},nativeOn:{click:function(e){t.getRecordsByLoc()}}},[n("md-icon",[t._v("my_location")])],1):t._e(),t._v(" "),n("pre",[t._v(t._s(t.species))]),t._v(" "),n("div",[t._v("token ready ? "+t._s(""!==this.$parent.token))]),t._v(" "),n("pre",[t._v(t._s(t.status))])],1)},staticRenderFns:[]}},95:function(t,e){},96:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),o=n.n(i),s=n(43),a=n.n(s),c=n(41),r=(n.n(c),n(44)),l=n.n(r),d=n(42),u=n.n(d);o.a.use(a.a),o.a.use(l.a),new o.a({el:"#app",template:"<App/>",components:{App:u.a}})}},[96]);
//# sourceMappingURL=app.6f75290dbeeb2a87e7e5.js.map