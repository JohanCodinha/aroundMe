webpackJsonp([1,2],{41:function(t,n){},42:function(t,n,e){e(84);var o=e(40)(e(45),e(87),null,null);t.exports=o.exports},45:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(86),i=e.n(o);n.default={name:"app",components:{speciesList:i.a}}},46:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(49),i=e.n(o),s=e(50),a=e.n(s),c=e(48),r=e.n(c);n.default={name:"speciesList",data:function(){return{records:[],token:"blank",selectedTaxonId:0,status:{token:"waiting for token",error:""}}},computed:{selectedTaxon:function(){var t=this;return this.records.filter(function(n){return n.taxonId===t.selectedTaxonId})[0]||{}},species:function(){return this.records.reduce(function(t,n){var e=r()({},{commonNme:n.commonNme,scientificDisplayNme:n.scientificDisplayNme,taxonId:n.taxonId,totalCountInt:Object.prototype.hasOwnProperty.call(n,"totalCountInt")?n.totalCountInt:1}),o=t.findIndex(function(t){return t.taxonId===e.taxonId});return o>-1?(e.totalCountInt+=t[o].totalCountInt,[].concat(a()(t.slice(0,o)),[e],a()(t.slice(o+1)))):[].concat(a()(t),[e])},[])}},methods:{getToken:function(){var t=this;return this.$http.get("https://vbapi.herokuapp.com/auth/guest").then(function(n){t.token=n.body.jwt})},getLocation:function(){var t={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};return new i.a(function(n,e){n({accu:"12",lat:"-37.809610",long:"144.972052"}),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){var e=t.coords.accuracy,o=t.coords.latitude,i=t.coords.longitude;console.log("Position aquired, accuracy : "+t.coords.accuracy),n({accu:e,lat:o,long:i})},function(t){e(new Error(t.message))},t):e(new Error("no geolocation feature present on device"))})},getRecordsByLoc:function(){var t=this,n=this.token;this.getLocation().then(function(e){console.log(e);var o={lat:e.lat,long:e.long,rad:250};t.$http.get("https://vbapi.herokuapp.com/search/point",{headers:{"x-access-token":n},params:o}).then(function(n){t.records=n.body.species,console.log(t.records.length+" Records found")})}).catch(function(n){t.status.error=n.message})},toggleRightSidenav:function(){this.selectedTaxonId=parseInt(event.target.id,10),this.$refs.rightSidenav.toggle()},closeRightSidenav:function(){this.$refs.rightSidenav.close()},open:function(t){console.log("Opened: + "+t)},close:function(t){console.log("Closed: + "+t)}},mounted:function(){var t=this;this.getToken().then(function(){t.status.token="Ready"})}}},84:function(t,n){},85:function(t,n){},86:function(t,n,e){e(85);var o=e(40)(e(46),e(88),null,null);t.exports=o.exports},87:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("md-toolbar",[e("h1",{staticClass:"md-title"},[t._v("Around me")])]),t._v(" "),e("speciesList")],1)},staticRenderFns:[]}},88:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"speciesList"}},[e("md-list",t._l(t.species,function(n){return e("md-list-item",{staticClass:"md-list-item",attrs:{specie:n}},[e("md-avatar",[e("img",{attrs:{src:"https://placeimg.com/40/40/animals/"+n.taxonId,alt:"People"}})]),t._v(" "),e("div",{staticClass:"md-list-text-container"},[e("span",[t._v(t._s(n.commonNme))]),t._v(" "),e("span",[t._v(t._s(n.scientificDisplayNme))]),t._v(" "),e("p",[t._v("Total count : "+t._s(n.totalCountInt))])]),t._v(" "),e("md-button",{staticClass:"md-icon-button md-list-action",nativeOn:{click:function(n){t.toggleRightSidenav(n)}}},[e("md-icon",{staticClass:"md-primary",attrs:{id:n.taxonId}},[t._v("info")])],1),t._v(" "),e("md-divider",{staticClass:"md-inset"})],1)})),t._v(" "),e("md-button",{staticClass:"md-button md-fab md-fab-bottom-right",staticStyle:{position:"fixed"},nativeOn:{click:function(n){t.getRecordsByLoc()}}},[e("md-icon",[t._v("my_location")])],1),t._v(" "),e("md-sidenav",{ref:"rightSidenav",staticClass:"md-right",on:{open:function(n){t.open("Right")},close:function(n){t.close("Right")}}},[e("md-toolbar",[e("div",{staticClass:"md-toolbar-container"},[e("h3",{staticClass:"md-title"},[e("md-icon",{nativeOn:{click:function(n){t.closeRightSidenav(n)}}},[t._v("arrow_back")]),t._v(t._s(t.selectedTaxon.commonNme))],1)])]),t._v(" "),e("md-button",{staticClass:"md-raised md-accent",nativeOn:{click:function(n){t.closeRightSidenav(n)}}},[t._v("Close")])],1),t._v(" "),e("pre",[t._v(t._s(t.status))]),t._v(" "),e("pre",[t._v(t._s(t.selectedTaxonId))]),t._v(" "),e("pre",[t._v(t._s(t.selectedTaxon))])],1)},staticRenderFns:[]}},91:function(t,n){},92:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(24),i=e.n(o),s=e(43),a=e.n(s),c=e(41),r=(e.n(c),e(44)),l=e.n(r),d=e(42),u=e.n(d);i.a.use(a.a),i.a.use(l.a),new i.a({el:"#app",template:"<App/>",components:{App:u.a}})}},[92]);
//# sourceMappingURL=app.187b045e4dccfaa153bd.js.map