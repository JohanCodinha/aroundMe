webpackJsonp([1,2],{40:function(t,n){},41:function(t,n,o){o(82);var e=o(83)(o(44),o(84),null,null);t.exports=e.exports},44:function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=o(47),a=o.n(e),i=o(48),c=o.n(i),s=o(46),r=o.n(s);n.default={name:"app",data:function t(){var t={records:[],token:"blank",status:{token:"waiting for token",error:""}};return t},computed:{species:function(){return this.records.reduce(function(t,n){var o=r()({},{commonNme:n.commonNme,scientificDisplayNme:n.scientificDisplayNme,taxonId:n.taxonId,totalCountInt:Object.prototype.hasOwnProperty.call(n,"totalCountInt")?n.totalCountInt:1}),e=t.findIndex(function(t){return t.taxonId===o.taxonId});return e>-1?(o.totalCountInt+=t[e].totalCountInt,[].concat(c()(t.slice(0,e)),[o],c()(t.slice(e+1)))):[].concat(c()(t),[o])},[])}},methods:{getToken:function(){var t=this;return this.$http.get("https://vbapi.herokuapp.com/auth/guest").then(function(n){t.token=n.body.jwt})},getLocation:function(){var t={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};return new a.a(function(n,o){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){var o=t.coords.accuracy,e=t.coords.latitude,a=t.coords.longitude;console.log("Position aquired, accuracy : "+t.coords.accuracy),n({accu:o,lat:e,long:a})},function(t){o(new Error(t.message))},t):o(new Error("no geolocation feature present on device"))})},getRecordsByLoc:function(){var t=this,n=this.token;this.getLocation().then(function(o){console.log(o);var e={lat:o.lat,long:o.long,rad:250};t.$http.get("https://vbapi.herokuapp.com/search/point",{headers:{"x-access-token":n},params:e}).then(function(n){t.records=n.body.species,console.log(t.records.length+" Records found")})}).catch(function(n){t.status.error=n.message})}},mounted:function(){var t=this;this.getToken().then(function(){t.status.token="Ready"})}}},82:function(t,n){},84:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"container",attrs:{id:"app"}},[o("md-toolbar",[o("h1",{staticClass:"md-title"},[t._v("Around me")])]),t._v(" "),o("md-layout",{attrs:{"md-align":"center","md-gutter":"16"}}),t._v(" "),o("md-list",t._l(t.species,function(n){return o("md-list-item",{staticClass:"md-list-item",attrs:{specie:n}},[o("md-avatar",[o("img",{attrs:{src:"https://placeimg.com/40/40/animals/"+n.taxonId,alt:"People"}})]),t._v(" "),o("div",{staticClass:"md-list-text-container"},[o("span",[t._v(t._s(n.commonNme))]),t._v(" "),o("span",[t._v(t._s(n.scientificDisplayNme))]),t._v(" "),o("p",[t._v("Total count : "+t._s(n.totalCountInt))])]),t._v(" "),o("md-button",{staticClass:"md-icon-button md-list-action"},[o("md-icon",{staticClass:"md-primary"},[t._v("info")])],1),t._v(" "),o("md-divider",{staticClass:"md-inset"})],1)})),t._v(" "),o("md-button",{staticClass:"md-button md-fab md-fab-bottom-right",staticStyle:{position:"fixed"},nativeOn:{click:function(n){t.getRecordsByLoc()}}},[o("md-icon",[t._v("my_location")])],1),t._v(" "),o("pre",[t._v(t._s(t.status))])],1)},staticRenderFns:[]}},87:function(t,n){},88:function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=o(24),a=o.n(e),i=o(42),c=o.n(i),s=o(40),r=(o.n(s),o(43)),u=o.n(r),l=o(41),d=o.n(l);a.a.use(c.a),a.a.use(u.a),new a.a({el:"#app",template:"<App/>",components:{App:d.a}})}},[88]);
//# sourceMappingURL=app.7dd72fb3f5a94e045078.js.map